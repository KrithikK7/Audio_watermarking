# Audio Watermarking System using AudioSeal

## Code Execution Manual

### Project Setup
This project uses **Python 3.8+** and the **AudioSeal** library.

1. Ensure Python (version 3.8 or higher) is installed.  
2. Open **Command Prompt (cmd)** and install all required libraries with a single command:
   ```bash
   pip install audioseal soundfile torchaudio
   ```
 File Structure

Unzip the Code_22BCI0102.zip file.

This will create a project folder containing:

embed.py → Script to embed a watermark into an audio file.

detect.py → Script to detect an existing watermark.

my_song.wav → Sample 16-bit audio file for testing.

Code Execution
Step 1: Embed a Watermark

Open cmd and navigate into the project folder.

2)Run the following command: 
```bash
python embed.py
```
3)The script executes automatically. It will:

Randomly generate a unique ID (e.g., 48293) and Embed 16 bits corresponding to that ID into my_song.wav

4)After execution, two files are generated:

watermarked_song.wav → The audio file with the embedded watermark.

metadata_log.csv → A log file storing metadata of the watermark.
```yaml

Sample Output:
Loading AudioSeal generator model...
Loaded 'my_song.wav', sample rate: 8000
Generating random ID and metadata...
Embedding random ID: 0xbd25
Embedding watermark...
Success! Saved 'watermarked_song.wav'
Metadata saved to 'metadata_log.csv' for ID 48293.

Step 2: Detect the Watermark (Successful Test)
```
Run the detection script: 
```bash
python detect.py
```
By default, it checks the watermarked_song.wav file. It extracts the watermark ID, verifies it in metadata_log.csv, and displays the full metadata.
Sample Output:
```yaml
Loading AudioSeal detector model...
Loaded 'watermarked_song.wav', sample rate: 16000
Detecting watermark...

--- DETECTION RESULTS ---
Watermark Detected: True
Decoded Message ID: 48293 (Bits: 1011110100100101)
Full Metadata: Message embedded at 2025-10-30 23:30:01 to audio generated by Gemini
```
Step 3: Test on a Clean File (Failure Test)

To confirm the accuracy of the detector:

1)Open detect.py in a text editor.

2)Change line from:
```python
input_filename = "watermarked_song.wav"
```
to:
```python
input_filename = "my_song.wav"
```
Save the file and re-run:
The detector should now report no watermark detected.

Sample Output:
```yaml
Loading AudioSeal detector model...
Loaded 'my_song.wav', sample rate: 8000
Detecting watermark...

--- DETECTION RESULTS ---
Watermark Detected: False
No watermark detected. No message to decode.
```
 Notes

1)Ensure all files (embed.py, detect.py, my_song.wav) are in the same directory.

2)The metadata_log.csv file stores all past watermark records for easy reference.  
   - The Streamlit UI writes to `streamlit_wm_log.csv` and automatically reuses this log during detection so the correct nonce and parameters are pulled in. Keep this file alongside the app or supply a manual `--nonce-hex` if you delete it.

3)Modify my_song.wav to test with other audio samples.
